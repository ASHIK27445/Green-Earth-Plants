<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green Earth Plants</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
        integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body>
    <header>
        <nav class="flex justify-around py-7 items-center bg-[#15803D] shadow-md gap-2.4">
            <div class="text-2xl font-bold text-white">
                <i class="fa fa-leaf"></i>
                <span>Green Earth</span>
            </div>

            <!--this div will hidden in small-->
            <div class="hidden md:flex font-inter font-medium text-sm text-white">
                <a href="#" class="ml-6">Home</a>
                <a href="#" class="ml-6">Gallery</a>
                <a href="#" class="ml-6">Plant a Tree</a>
            </div>

            <div>
                <button
                    class="btn btn-active bg-[#FACC15] rounded-full text-[#15803D] border-none font-inter font-medium text-sm">Plant
                    a tree
                </button>
            </div>
        </nav>
    </header>
    <main class="bg-[#F0FDF4]">
        <section class="bg-[#CFF0DC] flex md:">
            <div class="hidden md:flex"><img src="./assets/hero-leaf1.png" alt="" srcset=""></div>
            <div class="flex flex-col justify-center items-center text-center mt-14 mb-8 mx-8 md:mx-14">
                <h1 class="text-[#1F2937] font-inter font-bold text-2xl md:text-4xl lg:text-5xl">Plant a Tree, Grow a
                    Future</h1>
                <p class="text-[#1F2937] font-inter text-sm pt-2 pb-6 md:text-base">Join our mission to plant 1 million
                    trees and
                    make the Earth greener for future
                    generations.
                </p>
                <button
                    class="btn btn-active bg-[#FACC15] rounded-full text-[#15803D] border-none font-inter font-medium text-sm">Get
                    Involve
                </button>
            </div>
            <div class="hidden md:flex">
                <img src="./assets/hero-leaf2.png" alt="" srcset="">
            </div>
        </section>

        <section>
            <h1 class="text-center font-inter font-semibold text-3xl text-[#1F2937] pt-14 pb-8">Choose Your Trees</h1>
            <div>
                <div class="flex flex-col lg:flex-row gap-4 mx-5">
                    <div class="bg-white p-6 rounded-lg shadow-md w-full lg:w-[15%]">
                        <h2 class="text-lg font-semibold text-black mb-4">Categories</h2>
                        <div class="space-y-3" id="categoriesContainer">
                        </div>
                    </div>

                    <div class=" w-full lg:w-[65%]">
                        <div id="loadingIndicator" class="flex flex-col items-center justify-center w-full">
                            <span class="loading loading-spinner loading-xl mb-4"></span>
                            <p class="text-center text-gray-600">Loading plants...</p>
                        </div>
                        <div class="grid grid-cols-1 mx-3 md:mx-5 md:grid-cols-2 lg:grid-cols-3 gap-7"
                            id="plantsContainer">
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md lg:w-1/5">
                        <h2 class="text-2xl font-bold text-green-800 mb-4">Your Cart</h2>
                        <div id="cartItems" class="space-y-3">
                            <p class="text-gray-500">Your cart is empty</p>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-200">
                            <div class="flex justify-between mb-2">
                                <span class="font-medium">Total:</span>
                                <span class="font-bold" id="cartTotal">$0.00</span>
                            </div>
                            <button
                                class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded w-full mt-2">
                                Checkout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="my-14">
            <h1 class="text-center font-inter font-semibold text-3xl text-[#1F2937] pt-14 pb-8">About the Campaign</h1>
            <div class="flex flex-col lg:flex-row items-center gap-5 max-w-3xl mx-auto px-5">
                <div class="w-full rounded-lg">
                    <img src="./assets/about.png" alt="" srcset="">
                </div>
                <div class="w-full text-start text-[#1F2937] font-inter text-sm">
                    <p>Green Earth is a global tree plantation initiative dedicated to fighting climate change. Since
                        our start, we’ve planted over 500,000 trees worldwide. By joining our campaign, you help restore
                        forests, create habitats for wildlife, and combat global warming.</p>
                    <ul class="list-disc pl-5 pt-5">
                        <li>Restoration of natural habitats</li>
                        <li>Improvement of air quality</li>
                        <li>Support for local communities</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="bg-[#CFF0DC] pb-14">
            <h1 class="text-center font-inter font-semibold text-3xl text-[#1F2937] pt-14 pb-8">Our Impact</h1>
            <div class="mx-10 flex flex-col gap-10 lg:flex-row lg:mx-20">
                <div class="bg-white text-center rounded-xl w-full lg:w-3/5 py-10">
                    <h2 class="font-inter font-bold text-3xl pb-3 text-[#15803D]">500K+</h2>
                    <p class="font-inter text-sm text-[#1F2937]">Trees Planted</p>
                </div>
                <div class="bg-white text-center rounded-xl w-full lg:w-3/5 py-10">
                    <h2 class="font-inter font-bold text-3xl pb-3 text-[#15803D]">120+</h2>
                    <p class="font-inter text-sm text-[#1F2937]">Communities Involved</p>
                </div>
                <div class="bg-white text-center rounded-xl w-full lg:w-3/5 py-10">
                    <h2 class="font-inter font-bold text-3xl pb-3 text-[#15803D]">30+</h2>
                    <p class="font-inter text-sm text-[#1F2937]">Countries Reached</p>
                </div>
            </div>
        </section>

        <section class="bg-[#166534] flex flex-col items-center justify-center min-h-screen">
            <div class="w-full max-w-md text-center">
                <h1 class="font-inter font-semibold text-2xl lg:text-3xl text-white pt-14">Plant a Tree Today</h1>
            </div>

            <div class="mx-5 lg:mx-10 bg-[#15803D] p-8 shadow-md rounded-xl my-14 w-full max-w-lg">
                <form action="">
                    <input type="text" placeholder="Your Name"
                        class="w-full bg-white px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400 mb-3">

                    <input type="email" placeholder="Your Email Address"
                        class="w-full bg-white px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400 mb-3">

                    <select
                        class="w-full bg-white px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400 mb-3">
                        <option>Number of Trees</option>
                        <option>1 Tree</option>
                        <option>2 Trees</option>
                        <option>3 Trees</option>
                    </select>

                    <button type="submit"
                        class="w-full bg-yellow-400 text-green-900 font-semibold py-2 rounded-full hover:bg-yellow-500 transition mb-3">
                        Donate Now
                    </button>
                </form>
            </div>
        </section>

    </main>

    <div id="plantModal" class="hidden flex fixed inset-0 bg-opacity-50  items-center justify-center z-50 font-inter">
        <div class="bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold text-[#138013]" id="modalPlantName">Plant Name</h3>
                    <button id="closeModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <img id="modalPlantImage" src="" alt="" class="w-full h-64 object-cover rounded-lg mb-4">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <h4 class="font-semibold text-[#1F2937]">Category</h4>
                        <p id="modalPlantCategory" class="text-[#111111] text-xs"></p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-[#1F2937]">Price</h4>
                        <p id="modalPlantPrice" class="text-[#111111] text-xs">$25.99</p>
                    </div>
                </div>
                <div class="mb-4">
                    <h4 class="font-semibold text-[#1F2937]">Description</h4>
                    <p id="modalPlantDescription" class="text-[#111111] text-xs">Lorem ipsum dolor sit amet, consectetur
                        adipiscing elit. Nullam at nunc vitae nisi efficitur tempor.</p>
                </div>
                <div class="mb-4">
                    <h4 class="font-semibold text-[#1F2937]">Care Instructions</h4>
                    <p id="modalPlantCare" class="text-[#111111] text-xs"></p>
                </div>
                <button id="modalAddToCart"
                    class="w-full text-sm bg-green-600 hover:bg-[#1F2937] text-white font-bold py-2 px-4 rounded">
                    Add to Cart
                </button>
            </div>
        </div>
    </div>

    <footer class="text-center text-white bg-[#14532D] font-inter text-sm py-4">
        <p>© 2025 Green Earth. All Rights Reserved.</p>
    </footer>

    <script>
        const plantsContainer = document.getElementById('plantsContainer')
        const categoriesContainer = document.getElementById('categoriesContainer')
        const loadingIndicator = document.getElementById('loadingIndicator')
        const cartItems = document.getElementById('cartItems');
        const cartTotal = document.getElementById('cartTotal');
        const plantModal = document.getElementById('plantModal');
        const closeModal = document.getElementById('closeModal');
        const modalAddToCart = document.getElementById('modalAddToCart');

        let plants = []
        let categories = []
        let activeCategory = null
        let cart = []
        let currentPlant = null;

        //fetching plants data
        const fetchPlants = async () => {
            showLoading()
            try {
                const response = await fetch('https://openapi.programming-hero.com/api/plants')
                const data = await response.json()

                if (data.status && data.plants) {
                    plants = data.plants
                    extractCategories(plants);
                    displayPlants(plants)
                    displayCategories()
                    hideLoading()
                } else {
                    console.log("Error Occured", data)
                    hideLoading()
                }

            } catch (error) {
                console.error("Error Occured", error)
                hideLoading()
            }
        }


        //format currency
        function formatCurrency(amount) {
            return amount.toLocaleString('en-US', { style: 'currency', currency: 'USD' })
        }

        //showing loading status and indicator
        function showLoading() {
            plantsContainer.classList.add('hidden')
            loadingIndicator.classList.remove('hidden')
        }

        //hide loading
        function hideLoading() {
            loadingIndicator.classList.add('hidden')
            plantsContainer.classList.remove('hidden')
        }

        //display plants
        const displayPlants = (plants) => {
            plantsContainer.innerHTML = ''
            if (plants.length === 0) {
                plantsContainer.innerHTML = `
                <div>
                    <i class="fas fa-seedling text-4xl text-green-600 mb-4"></i>
                    <p class="text-xl text-gray-700">No plants found in this category</p>
                    <button class="mt-4 text-primary hover:underline" onclick="displayPlants(plants)">
                            View all plants
                    </button>
                </div>
                `
                return
            }

            plants.forEach((plant) => {
                const card = document.createElement('div')
                card.className = 'plant-card bg-white rounded-lg shadow-md overflow-hidden'
                card.innerHTML = `
                    <div class="px-4"><img src="${plant.image}" alt="${plant.name}" loading="lazy" class="w-full h-42 object-cover" onload="this.classList.remove('opacity-0')"></div>

                    <div class="px-4 py-2">
                        <h3 class="text-[12px] font-inter font-semibold text-[#1F2937] mb-2 cursor-pointer hover:text-green-600 plant-name">${plant.name}</h3>
                        <p class="text-[#!F2937] font-inter text-[10px] text-sm mb-2">${plant.description ? plant.description.substring(0, 60) + '...' : 'No description available'}</p>
                        <div class="flex justify-between items-center mb-3">
                            <span class="bg-[#DCFCE7] text-[#15803D] text-xs font-medium px-3 py-0.5 rounded-[400px] font-geist">${plant.category || 'Uncategorized'}</span>
                            <span class="text-xs font-semibold text-[#1F2937]">${plant.price ? formatCurrency(parseFloat(plant.price)) : '$0.00'}</span>
                        </div>
                        <button class="add-to-cart-btn w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-full font-inter text-sm">Add to Cart
                        </button>
                    </div>
                `

                // Add event listener for plant name (to open modal)
                card.querySelector('.plant-name').addEventListener('click', () => {
                    openPlantModal(plant);
                });

                // Add event listener for add to cart button
                card.querySelector('.add-to-cart-btn').addEventListener('click', () => {
                    addToCart(plant);
                });
                plantsContainer.appendChild(card)
            })
        }

        function extractCategories(plants) {
            const categorySet = new Set();
            plants.forEach(plant => {
                if (plant.category) {
                    categorySet.add(plant.category);
                }
            });

            categories = Array.from(categorySet).sort(); // optional: sort alphabetically
        }


        const displayCategories = () => {
            categoriesContainer.innerHTML = ''

            const allButton = document.createElement('button');
            allButton.className = 'category-btn w-full text-left py-2 px-4 rounded-lg text-sm hover:text-white hover:bg-[#1F2937] active';
            allButton.textContent = 'All Plants';
            allButton.addEventListener('click', () => {
                document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
                allButton.classList.add('active');
                activeCategory = null;
                displayPlants(plants);
            });
            categoriesContainer.appendChild(allButton);

            //add categories button
            categories.forEach(category => {
                const caButton = document.createElement('button')
                caButton.className = 'category-btn w-full text-left py-2 px-4 rounded-lg text-sm hover:text-white hover:bg-[#1F2937]'
                caButton.textContent = category
                caButton.addEventListener('click', () => {
                    document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'))
                    caButton.classList.add('active');
                    const filteredPlants = plants.filter(plant => plant.category === category)
                    displayPlants(filteredPlants)

                })
                categoriesContainer.appendChild(caButton)
            })

        }

        // Add to cart
        const addToCart = (plant) => {
            cart.push({
                id: plant.id,
                name: plant.name,
                price: plant.price ? parseFloat(plant.price) : 0,
                image: plant.image
            });

            updateCart();
            showNotification(`${plant.name} added to cart!`);
        };

        // Remove from cart
        const removeFromCart = (index) => {
            const removedItem = cart[index];
            cart.splice(index, 1);
            updateCart();
            showNotification(`${removedItem.name} removed from cart!`);
        };

        // Update cart display
        const updateCart = () => {
            cartItems.innerHTML = '';

            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-gray-500">Your cart is empty</p>';
                cartTotal.textContent = formatCurrency(0);
                return;
            }

            let total = 0;

            cart.forEach((item, index) => {
                total += item.price;

                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item bg-green-50 p-3 rounded-lg flex items-center justify-between';
                cartItem.innerHTML = `
                    <div class="flex items-center">
                        <img src="${item.image}" alt="${item.name}" class="w-10 h-10 object-cover rounded">
                        <div class="ml-3">
                            <p class="font-medium text-green-800">${item.name}</p>
                            <p class="text-green-600">${formatCurrency(item.price)}</p>
                        </div>
                    </div>
                    <button class="remove-from-cart text-red-600 hover:text-red-800">
                        <i class="fas fa-times"></i>
                    </button>
                `;

                cartItem.querySelector('.remove-from-cart').addEventListener('click', () => {
                    removeFromCart(index);
                });


                cartItems.appendChild(cartItem);
            });

            cartTotal.textContent = formatCurrency(total);
        };


        // Open plant modal
        const openPlantModal = async (plant) => {
            currentPlant = plant;

            // Update modal content
            document.getElementById('modalPlantName').textContent = plant.name;
            document.getElementById('modalPlantImage').src = plant.image;
            document.getElementById('modalPlantCategory').textContent = plant.category || 'Uncategorized';
            document.getElementById('modalPlantPrice').textContent = plant.price ? formatCurrency(parseFloat(plant.price)) : '$0.00';
            document.getElementById('modalPlantDescription').textContent = plant.description || 'No description available';
            document.getElementById('modalPlantCare').textContent = 'Requires moderate sunlight and weekly watering. Suitable for both indoor and outdoor environments.';

            // Show modal
            plantModal.classList.remove('hidden');
            plantModal.classList.add('flex');
        };

        // Close modal
        closeModal.addEventListener('click', () => {
            plantModal.classList.add('hidden');
            plantModal.classList.remove('flex');
        });

        // Add to cart from modal
        modalAddToCart.addEventListener('click', () => {
            if (currentPlant) {
                addToCart(currentPlant);
                plantModal.classList.add('hidden');
                plantModal.classList.remove('flex');
            }
        });




        fetchPlants()

    </script>
</body>

</html>